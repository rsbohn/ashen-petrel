# Dev Log - 2026-01-09

## Summary

- Implemented a Format 2 ISA execution model with a 4-register stack, packed
  opcodes, and full-word instruction decoding.
- Added extensive ISA coverage: BR, LOAD, STOR, LDI/LDXI, HALT, IABZ/IXBZ/DXBZ,
  and several stack/X register ops.
- Built a file assembler with labels, `ORG`, `DW`, comments, and numeric
  literals in octal/hex/decimal; added error-reporting improvements and ORG
  reporting.
- Iterated on monitor UX: trace command, improved disassembly output, and
  register reporting.

## Timeline Notes

- Clarified Format 2 packing (two 6-bit ops per word) and updated `step` to
  execute sequentially.
- Implemented the register stack model (RA/RB/RC/RD + SR/SM) with spill/fill and
  underflow halts; redirected monitor stack operations to CPU stack.
- Added BR full-word format with P-relative addressing and optional ,I/,X; later
  fixed decode priority over LOAD.
- Added LDI/LDXI full-word immediates with proper binary encoding and assembly.
- Added LOAD (P-relative) and STOR (DB-relative) full-word formats, plus DB
  register tracking.
- Implemented IABZ/IXBZ/DXBZ branch-on-zero families (A or X inc/dec) with
  short-range P-relative displacement and optional ,I.
- Added HALT 0 as a full-word instruction and assembler support.
- Implemented `asm <file>` for .asm sources; added labels, `DW`, `ORG`, and
  literal parsing for octal, `$` hex, and `#` decimal.
- Resolved label references in operands, including `LOAD LABEL`, `P+N`, and
  `.+N` dot-relative notation.
- Updated sample programs under `sd/` and validated loops that fill memory
  ranges with a constant.

## Notable Behaviors

- `dis` prints word value and two mnemonics for packed ops; full-word formats
  (e.g., BR/LOAD/STOR/LDI/LDXI/HALT) decode directly.
- `trace` steps and prints registers after each instruction.
- `asm` reports assembled word count in octal and shows the origin address.
